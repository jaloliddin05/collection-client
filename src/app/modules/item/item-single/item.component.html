<app-back-button></app-back-button>
<div class="container ">
    <div class="d-flex align-items-stretch w-100">
        <div class="w-25">
            <img [src]="item?.avatar?.url" alt="" class="w-100 h-100 card-img rounded rounded-2">
        </div>
        <div class="mx-3 h-100 w-75">
            <h2 class="mb-3">{{item?.name}}</h2>
            <app-field-list [fields]="item?.fields" [canUpdate]="userId"></app-field-list>
        </div>
    </div>
    <div class="mt-4">
        <div class="d-flex align-items-center justify-content-between h-100">
            <div class="text-secondary mt-2">
                <p class="text-secondary fw-bold">Comments: ‚úâÔ∏è{{comments.length}}</p>
            </div>
            <div class="d-flex align-items-center mx-4">
                <p class="text-secondary fw-bold m-0">Likes:</p>
                <button [disabled]="!userAccountId" class="btn border-0 fs-4"
                    (click)="changeLike(!item?.isLiked)">{{item?.isLiked ?'‚ù§Ô∏è':'üñ§' }}
                </button>
                <span [class.text-dark]="!item?.isLiked" [class.text-danger]="item?.isLiked"
                    class="fs-4">{{item?.likesCount}}</span>
                <ul class="list-unstyled d-flex align-items-center mx-3 mt-2">
                    <li *ngFor="let user of likedUsers" class="user-avatar">
                        <img [src]="user?.avatar?.url" height="40" width="40" alt="" class="user-avatar-img">
                    </li>
                    <li *ngIf="anotherLikedUsersCount > 0" class="">+{{anotherLikedUsersCount}}</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="">
        <div *ngIf="user?.name" class="position-relative">
            <span class="user-comment-avatar">
                <img *ngIf="user?.avatar?.url" [src]="user?.avatar?.url" alt="" class="rounded-circle" width="40"
                    height="40">
                <img *ngIf="!user?.avatar?.url" src="../../../../assets/person.svg" alt="" class="rounded-circle"
                    width="40" height="40">
            </span>
            <input type="text" class="form-control comment-input p-3 text-secondary" [(ngModel)]="text"
                placeholder="Add a comment">
            <button class="btn btn-secondary comment-add-btn" (click)="addComment()">Post</button>
        </div>
        <app-comment-list [comments]="comments"></app-comment-list>
    </div>
</div>